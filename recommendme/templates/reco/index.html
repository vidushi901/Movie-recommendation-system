<!DOCTYPE html>
<!-- To load all static files such as css or images -->
{% load static %}
<html>
    <head>
        <title>
            Index
        </title>
        <!-- link to css stylesheet -->
        <link rel='stylesheet' href='{% static "css/style.css" %}' />
        <!-- Adding bootstrap -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    </head>
    <body>
    <!-- to create a toggle switch which is actually a button with additional markup -->
        <div class="theme-switch-wrapper offset-md-10">
            <label class="theme-switch" for="checkbox">
                <input type="checkbox" id="checkbox" />
                <div class="slider round"></div>
          </label>
          <em>Enable Dark Mode!</em>
        </div>
        <div class="container-fluid">
            <div class= "content1">
            <h1>Welcome!</h1>
            <h2>Ready to get to the best movie recommendations?</h2>
            </div>
            </br>
            <!-- Redirects to the form page -->
            <div class="b1"><a href="{% url 'formPage' %}"><button class="btn btn-primary" width=30%>Recommend Me</button></a></div>
        </div>
        <!-- JS script-->
        <script>
                /*following snippet gets added to the data-theme element that was referenced in CSS */
            const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');

            function switchTheme(e) {
                if (e.target.checked) {
                    document.documentElement.setAttribute('data-theme', 'dark');
                }
                else {
                    document.documentElement.setAttribute('data-theme', 'light');
                }    
            }

            toggleSwitch.addEventListener('change', switchTheme, false);
            /* use browser's localStorage to store the user preference*/
            function switchTheme(e) {
                if (e.target.checked) {
                    document.documentElement.setAttribute('data-theme', 'dark');
                    localStorage.setItem('theme', 'dark'); //add this
                }
                else {
                    document.documentElement.setAttribute('data-theme', 'light');
                    localStorage.setItem('theme', 'light'); //add this
                }    
            }
            /* to check for a saved preference and set data-theme attribute and check/uncheck toggle swit ch */
            const currentTheme = localStorage.getItem('theme') ? localStorage.getItem('theme') : null;

            if (currentTheme) {
                document.documentElement.setAttribute('data-theme', currentTheme);

                if (currentTheme === 'dark') {
                    toggleSwitch.checked = true;
                }
            }    
        </script>
    </body>
</html>